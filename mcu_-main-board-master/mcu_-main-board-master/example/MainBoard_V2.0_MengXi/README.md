[English](/README.md) | [ 简体中文](/README_zh-Hans.md) | [繁體中文](/README_zh-Hant.md) | [日本語](/README_ja.md) | [Deutsch](/README_de.md) | [한국어](/README_ko.md)

<div align=center>
<img src="./image/logo.png" width="450" height="100"/>
</div>


## **此目录下的工程由米醋电子工作室的梦兮提供，感谢其对该开发板例程的支持。**

## STM32F407VET6 MainBoard V2.0 示例工程集

[![HAL](https://img.shields.io/badge/HAL-STM32F4-brightgreen.svg)](/Drivers) [![Keil](https://img.shields.io/badge/IDE-Keil_MDK-blue.svg)](https://www.keil.com/) [![License](https://img.shields.io/badge/license-MIT-brightgreen.svg)](/LICENSE)

STM32F407VET6 MainBoard V2.0是一款基于ARM Cortex-M4内核的高性能微控制器开发板，运行频率高达168MHz。本项目包含16个完整的示例工程，涵盖了嵌入式开发中的常用外设和功能模块，包括模板工程、LED控制、按键输入、串口通信、OLED显示、灰度传感器、电机控制、编码器、多串口通信、PID控制算法、步进电机控制、九轴传感器、温湿度传感器、Flash存储等应用。所有工程均基于STM32 HAL库开发，提供了完整的硬件驱动、任务调度器和应用示例，适用于各种传感、控制、通信和数据采集应用场景。

### 目录

  - [说明](#说明)
  - [硬件平台](#硬件平台)
  - [工程列表](#工程列表)
    - [00_Template](#00_template)
    - [01_LED](#01_led)
    - [02_KEY](#02_key)
    - [03_UART](#03_uart)
    - [04_OLED](#04_oled)
    - [05_Grayscale](#05_grayscale)
    - [06_Motor](#06_motor)
    - [07_Encoder](#07_encoder)
    - [08_ICM20608](#08_icm20608)
    - [09_more_uart](#09_more_uart)
    - [10_PID](#10_pid)
    - [11_ZDT_Step_Motor](#11_zdt_step_motor)
    - [12_BNO08X](#12_bno08x)
    - [13_AHT20](#13_aht20)
    - [14_FLASH](#14_flash)
    - [Test_Example](#test_example)
  - [通用组件](#通用组件)
  - [快速开始](#快速开始)
  - [工程结构](#工程结构)
  - [文档](#文档)
  - [贡献](#贡献)
  - [版权](#版权)
  - [联系我们](#联系我们)

### 说明

本项目为STM32F407VET6 MainBoard V2.0开发板提供了16个完整的示例工程，每个工程都专注于特定的功能模块和外设应用。

/00_Template目录包含基础模板工程，提供任务调度器框架。

/01_LED目录包含LED控制示例，演示GPIO输出和PWM调光功能。

/02_KEY目录包含按键输入处理示例，支持单击、双击、长按检测。

/03_UART目录包含串口通信示例，实现UART数据收发。

/04_OLED目录包含OLED显示屏控制示例，支持字符和图形显示。

/05_Grayscale目录包含灰度传感器应用示例，用于循迹小车。

/06_Motor目录包含电机控制示例，实现直流电机的速度和方向控制。

/07_Encoder目录包含编码器测量示例，实现高精度位置和速度检测。

/08_ICM20608目录包含六轴传感器示例，获取加速度和角速度数据。

/09_more_uart目录包含多串口通信示例，实现多路数据通信。

/10_PID目录包含PID控制算法示例，实现闭环控制系统。

/11_ZDT_Step_Motor目录包含闭环步进电机控制示例，高精度定位控制。

/12_BNO08X目录包含九轴传感器示例，提供完整的姿态检测功能。

/13_AHT20目录包含温湿度传感器测量示例。

/14_FLASH目录包含Flash存储器操作示例。

/Test_Example目录包含综合测试示例，集成多种外设功能。

每个工程的/User目录包含了用户应用代码、驱动程序和功能模块。

每个工程的/Core目录包含了STM32 HAL库核心代码。

每个工程的/Drivers目录包含了STM32F4xx HAL驱动库。

每个工程的/MDK-ARM目录包含了Keil MDK-ARM工程文件。

### 硬件平台

- **主控芯片**: STM32F407VET6 (ARM Cortex-M4, 168MHz)
- **Flash**: 512KB
- **SRAM**: 192KB
- **开发板**: Mcore MainBoard V2.0
- **开发环境**: Keil MDK-ARM
- **调试接口**: SWD
- **电源**: 5V

### 工程列表

#### 00_Template

基础模板工程，提供完整的开发框架和任务调度器。

**主要特性**:
- 任务调度器框架 (Scheduler)
- 系统时钟配置
- GPIO基础配置
- 标准化工程结构
- 调试接口配置

**硬件连接**:
- 标准STM32F407VET6最小系统
- SWD调试接口

#### 01_LED

LED控制示例，演示GPIO输出和PWM调光功能。

**主要特性**:
- GPIO控制LED开关
- PWM调光功能
- 多种闪烁模式
- 亮度渐变效果

**硬件连接**:
- PC0 - LED1 (低电平点亮)
- PC1 - LED2 (低电平点亮)
- PC2 - LED3 (低电平点亮)

#### 02_KEY

按键输入处理示例，支持单击、双击、长按检测。

**主要特性**:
- 硬件消抖和软件消抖
- 单击、双击、长按事件检测
- 按键状态机处理
- 中断和轮询双模式

**硬件连接**:
- PA0 - KEY1 (低电平有效)
- PA1 - KEY2 (低电平有效)
- PE2 - KEY3 (低电平有效)

#### 03_UART

串口通信示例，实现UART数据收发和协议解析。

**主要特性**:
- UART1串口通信 (115200bps)
- DMA数据收发
- 自定义通信协议
- printf重定向支持

**硬件连接**:
- PA9 - UART1_TX
- PA10 - UART1_RX

#### 04_OLED

OLED显示屏控制示例，支持字符和图形显示。

**主要特性**:
- SH1106/SSD1306控制器支持
- I2C通信接口
- 字符、数字、图形显示
- 多种字体支持
- 动画效果

**硬件连接**:
- PB8 - I2C1_SCL
- PB9 - I2C1_SDA

#### 05_Grayscale

灰度传感器应用示例，用于循迹小车等场景。

**主要特性**:
- 多路灰度传感器采集
- ADC模数转换
- 阈值检测算法
- 循迹路径计算

**硬件连接**:
- PA0~PA7 - 灰度传感器模拟输入

#### 06_Motor

电机控制示例，实现直流电机的速度和方向控制。

**主要特性**:
- PWM调速控制
- H桥方向控制
- 速度PID闭环控制
- 编码器反馈

**硬件连接**:
- PA8, PA9 - 电机PWM输出
- PB0, PB1 - 电机方向控制

#### 07_Encoder

编码器测量示例，实现高精度位置和速度检测。

**主要特性**:
- 增量式编码器接口
- 定时器编码器模式
- 位置和速度计算
- 方向检测

**硬件连接**:
- PA0, PA1 - 编码器A相, B相
- PA2 - 编码器Z相(可选)

#### 08_ICM20608

六轴IMU传感器数据采集示例。

**主要特性**:
- I2C接口传感器驱动
- 三轴加速度计数据读取
- 三轴陀螺仪数据读取
- 传感器融合算法
- 姿态角度计算

**硬件连接**:
- PB6 - I2C1_SCL
- PB7 - I2C1_SDA

#### 09_more_uart

多串口通信示例，实现多路数据通信和路由。

**主要特性**:
- 多路UART接口 (UART1~UART3)
- 数据路由和转发
- AT命令处理
- GPS数据解析

**硬件连接**:
- PA9, PA10 - UART1
- PA2, PA3 - UART2  
- PB10, PB11 - UART3

#### 10_PID

PID控制算法示例，实现闭环控制系统。

**主要特性**:
- 位置式PID控制算法
- 增量式PID控制算法
- 参数自整定功能
- 温度控制应用示例

**硬件连接**:
- PA0 - 温度传感器输入
- PA1 - 加热器PWM输出

#### 11_ZDT_Step_Motor

闭环步进电机控制示例，实现高精度定位控制。

**主要特性**:
- 步进电机驱动控制
- 编码器位置反馈
- 闭环位置控制
- 轨迹规划算法
- 失步检测和补偿

**硬件连接**:
- PA8~PA11 - 步进电机控制信号
- PB0, PB1 - 编码器反馈

#### 12_BNO08X

九轴传感器示例，提供完整的姿态检测功能。

**主要特性**:
- SHTP协议通信
- 四元数姿态输出
- 欧拉角转换
- 传感器融合
- 运动检测功能

**硬件连接**:
- PB8 - I2C1_SCL
- PB9 - I2C1_SDA
- PA5 - 中断信号
- PA6 - 复位信号

#### 13_AHT20

温湿度传感器测量示例，实现环境参数监测。

**主要特性**:
- I2C接口传感器驱动
- 高精度温湿度测量
- 校准和补偿算法
- 数据滤波处理

**硬件连接**:
- PB6 - I2C1_SCL
- PB7 - I2C1_SDA

#### 14_FLASH

Flash存储器操作示例，实现数据的持久化存储。

**主要特性**:
- SPI Flash驱动
- 扇区擦除和页编程
- 数据读写验证
- 文件系统支持

**硬件连接**:
- PA4~PA7 - SPI1接口

#### Test_Example

综合测试示例，集成多种外设功能验证。

**主要特性**:
- 全外设功能测试
- 系统稳定性验证
- 性能基准测试
- 自动化测试流程

### 通用组件

**Scheduler**: 任务调度器组件，提供时间片轮转和优先级调度功能。

**User Driver**: 用户驱动层，包含各种传感器和执行器的底层驱动。

**User App**: 用户应用层，实现具体的功能逻辑和算法。

**User Module**: 用户模块层，提供可重用的功能模块和中间件。

**MyDefine**: 用户定义头文件，包含全局宏定义和配置参数。

### 快速开始

参考每个工程目录下的具体说明，完成硬件连接和软件配置。

#### 环境准备

```bash
# 安装Keil MDK-ARM开发环境
# 准备STM32F407VET6开发板
# 连接ST-Link调试器
```

#### 工程编译

```bash
# 进入对应工程目录
cd 00_v2_RGB_Blink

# 使用Keil打开工程文件
# 双击 MDK-ARM/*.uvprojx 文件

# 编译工程
# 按F7或点击编译按钮
```

#### 程序下载

```bash
# 连接ST-Link到开发板
# 在Keil中配置调试器
# 按F8下载程序到Flash
```

## 开发指南

### 开发环境搭建
1. **安装Keil MDK-ARM**: 版本5.29或更高
2. **安装STM32CubeMX**: 用于配置外设和生成代码
3. **安装ST-Link驱动**: 用于程序下载和调试
4. **准备开发板**: STM32F407VET6 MainBoard V2.0

### 编译和下载流程
```bash
# 1. 打开Keil工程
# 双击对应工程目录下的 MDK-ARM/*.uvprojx 文件

# 2. 配置工程
# Project -> Options for Target -> Debug
# 选择ST-Link Debugger

# 3. 编译工程
# Project -> Build Target (F7)

# 4. 下载程序
# Flash -> Download (F8)

# 5. 运行调试
# Debug -> Start/Stop Debug Session (Ctrl+F5)
```

### 移植指南
如需移植到其他STM32F4系列芯片：
1. 修改STM32CubeMX配置文件(.ioc)
2. 重新生成代码
3. 检查引脚定义和时钟配置
4. 调整外设参数和任务调度器配置
5. 更新用户定义文件(MyDefine.h)
6. 重新编译和测试

## 技术支持

### 常见问题解答
1. **编译错误**: 检查Keil版本和HAL库配置，确认用户代码路径正确
2. **下载失败**: 检查ST-Link连接和驱动，验证调试器配置
3. **程序不运行**: 检查时钟配置、复位电路和任务调度器初始化
4. **外设不工作**: 检查硬件连接、引脚配置和驱动初始化
5. **任务调度异常**: 检查任务优先级设置和时间片分配

### 调试技巧
- 使用串口输出调试信息和任务状态
- 利用Keil调试器观察变量和任务执行
- 使用逻辑分析仪检查信号时序
- 添加LED指示程序和任务运行状态
- 利用任务调度器的统计功能监控系统负载

### 文档

**离线文档**: /doc目录包含开发板数据手册和驱动指南

**在线资源**:
- [STM32F407参考手册](https://www.st.com/resource/en/reference_manual/dm00031020.pdf)
- [STM32F4 HAL库文档](https://www.st.com/resource/en/user_manual/dm00105879.pdf)
- [STM32CubeMX用户手册](https://www.st.com/resource/en/user_manual/dm00104712.pdf)

### 贡献

欢迎提交代码贡献和改进建议：
1. Fork本项目
2. 创建功能分支
3. 提交代码更改
4. 发起Pull Request

### 版权

版权 (c) 2025 MCU Electronics Technology 版权所有

MIT 许可证（MIT）

特此免费授予任何获得本软件副本和相关文档文件（下称"软件"）的人不受限制地处置该软件的权利，包括不受限制地使用、复制、修改、合并、发布、分发、转授许可和/或出售该软件副本，以及再授权被配发了本软件的人如上的权利，须在下列条件下：

上述版权声明和本许可声明应包含在该软件的所有副本或实质成分中。

本软件是"如此"提供的，没有任何形式的明示或暗示的保证，包括但不限于对适销性、特定用途的适用性和不侵权的保证。在任何情况下，作者或版权持有人都不对任何索赔、损害或其他责任负责，无论这些追责来自合同、侵权或其它行为中，还是产生于、源于或有关于本软件以及本软件的使用或其它处置。

### 联系我们

如有技术问题或建议，请通过以下方式联系：
- 项目主页: https://gitee.com/Ahypnis
